/*! Texttweet.js
*  Author: Michael Scharnagl @justmarkup
*  Version: 0.1.0
*  License: MIT
*/
!function(a,b){"use strict";function c(a){var c=b.body,d=c.innerHTML,e=d.indexOf(a);e>=0&&(d=d.substring(0,e)+'<span id="highlight" class="highlight">'+d.substring(e,e+a.length)+"</span>"+d.substring(e+a.length),c.innerHTML=d)}var d,e,f,g,h,i="querySelector"in b&&"addEventListener"in a&&a.getSelection;b.location.hash&&(c(decodeURIComponent(b.location.hash).replace(/\+/g," ").split("#")[1]),setTimeout(function(){b.getElementById("highlight").scrollIntoView({behavior:"smooth"})},1e3)),i&&(d=function(a){return a&&(a.trim?a.trim():a.replace(/^\s+|\s+$/g,""))},e=function(a){return encodeURIComponent(d(a)).replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A").replace(/\./g,"%2E").replace(/~/g,"%7E").replace(/%20/g,"+")},f=function(a){return encodeURIComponent(a.replace(/\+/g,"%20").replace("#","%23"))},g=function(){var b,c,d=a.getSelection(),e=0,f=0;return d.rangeCount&&(b=d.getRangeAt(0).cloneRange(),b.getClientRects&&(b.collapse(!0),c=b.getClientRects()[0],e=c.left,f=c.top)),{x:e,y:f}},h=function(){var c=a.getSelection().toString(),d=b.querySelector(".share-button");c?(b.querySelector(".highlight")&&(b.querySelector(".highlight").className=""),b.location.hash=e(c),g(),d.style.top=g().y+"px",d.style.left=g().x+"px",d.className="share-button share-button-active",d.href="http://www.twitter.com/intent/tweet?text="+c+"&url="+f(b.location.href)):d.className="share-button"},b.documentElement.addEventListener("mousedown",function(){h()},!1),b.documentElement.addEventListener("mouseup",function(){h()},!1),b.documentElement.addEventListener("keydown",function(){h()},!1),b.documentElement.addEventListener("keyup",function(){h()},!1),a.addEventListener("scroll",function(){h()},!1))}(this,this.document);